# 使用文档

# 绘图

* **#绘图** [ `正面tag` ]  [ **横图**|**方图** ] [ **步数**`30` ] [ **种子**`1234567` ] [ `长度`**×**`宽度` ] [ **重绘幅度**`0.55` ] [ **提示词相关性**`7` ] [ **接口**`2` ] [ `3`**张** ] [`采样器`] [ **Hires**`倍数` ] [ **ntags=**`反面tag` ] [ `指定图片` ]
  * 竖线表示两边只能选一，方括号中为可选内容(使用时不带方括号)，可自由组合，除**ntags需要放在命令尾部**以外，其他参数顺序不限。参数含义如下：
  * **正面tag**：希望出现的特征，如 pink hair
  * **反面tag**：不希望出现的特征，例如 nsfw
  * **横图**、**方图**：指定图片的比例，未指定时默认为竖向
  * **步数**：指定迭代次数，默认为40，范围1~99
  * **种子**：使用指定的种子生成的图片具有较高的一致性
  * `长度`**×**`宽度`: 指定生成图像的分辨率，64的倍数且不超过2048
  * **重绘幅度**：仅在以图生图时有效：指定偏离原图的程度。默认0.6，范围0~0.99
  * **提示词相关性**： 默认11，范围0~99
  * **接口**：指定使用某个接口绘图。不指定时将使用默认值
  * `?`**张**：批量绘制若干张图片。最大10张
  * **采样器**：用于指定本次绘图使用的采样器，如Euler a, DPM2 a Karras, DPM2 a, DPM2等
  * **Hires**`倍数`: 用于高清修复
  * **指定图片**：当符合以下条件之一，判断此次绘图为**以图生图**
  * ①绘图命令`附带了图片`
  * ②绘图命令`引用回复了图片`
  * ③绘图命令`艾特了某个用户`（将基于其头像生成图片）
* **#ap设置(全局)默认**  [` 采样方法 `]  [` 迭代次数 `]  [` 宽度 `]  [` 高度 `]  [` 提示词相关性 `]  [` 重绘幅度 `]  [` 高清修复 `]  [` 放大算法 `]  [` 高清修复步数 `]  [` 高清修复重绘幅度 `]  [` 高清修复放大倍数 `]  ：设置私人的绘图参数，在没有指定时自动使用
* **#ap查看(全局)默认参数**： 查看自己的默认绘图参数

# 以图绘图

* **以图绘图** [ `正面tag` ] [ `图片` ]
  * 使用默认配置的ControlNet绘制图片
* **预处理** [ `图片` ]
  * 通过指定预处理器获取图片蒙版/骨骼图
* **控制网模型**
  * 查看当前接口可用的控制网模型
* **控制网预处理器**
  * 查看当前接口可用的控制网预处理器
* **控制网设置模型** [ `模型名称` ]
  * 设置默认的控制网模型
* **控制网设置预处理器** [ `预处理器名称` ]
  * 设置默认的控制网预处理器

# 二次元的我

* **二次元的我**
  * 随机组合一组属性作为tag，绘制对应图片。属性每日0点刷新
* **#二次元的我** 
  * 随机组合一组属性作为tag，使用头像以图生图。 
* **%二次元的我** 
  * 有可用逆推接口时，随机组合一组属性作为tag，并解析头像的tag，将二者组合作为tag来以文生图; 没有可用逆推接口时，效果与 **#二次元的我** 相同
* **/二次元的我** 
  * 有可用逆推接口时，解析头像的tag，以文生图绘制对应图片; 没有可用逆推接口时，效果与 **二次元的我** 相同
* [ **全局** ] **刷新二次元的我** [ `@用户` ]
  * 刷新全部用户或指定用户的属性

# 图片处理

* **#大清晰术** [ **二重唱** | **三重唱** | **四重唱** ] [ **强力术式** | **中等术式** | **不变式** | **原式** ] 
  * 图片超分和降噪。可对图片回复该命令，或将命令与图片一同发送
  * 竖线表示不能共存，方括号中为可选内容(使用时不带方括号)
  * `?`**重唱**：指定放大倍数，默认2倍。图片过大时，将强制使用2倍放大
  * `?`**式**：指定降噪等级
* **#鉴赏**：逆推图片的tag。
* **#鉴定图片**：检查图片是否为AI绘制的。
* **#抠图**：去除图片背景。
* **#图片动漫化**：将照片处理为动漫风格。
* **#卢浮宫** [ **精细** | **一般** | **稍粗** | **极粗** | **浮雕** ]  [ **降噪** ]  [ **水印** ]  [ **kiss** ]  [ **初回** ]  [ **线迹轻重** `80~126` ]  [ **调子数量** `20~200` ] 
  * 一个优雅的图片风格化滤镜。
  * 建议上传 **赛璐珞风格** 的 **动画截图**、**插画** 等，效果最佳；  高清图请务必 **关闭降噪** ，线条更精致
* **#更换背景(人物)** [ `关键词`]：一键更换图像中的背景或人物。
  * 请上传带人物的图像以便正常处理图像结构
* **#局部重绘** [ `关键词`]：将涂黑的地方重新绘制
  * 请同时上传两张图片，第一张需是原图，第二张是涂抹之后的图，请使用黑色(#000000)进行涂抹，误差值在20之内才可正常识别
* **#图片转音乐** [ `时长`] [ `复杂程度`] [ `曲式`]：将图片转换成音频
* **#二次元美学** [ `图片`]：为图片打个分
* **#图片差分** [ `?张` ] [ `图片` ]: 调整重绘幅度达到图片差分效果

# 本地图片管理

* **#ap检索本地图片** [ `关键词`] [ **第**`?` **页**]
  * 查看已绘制并保存至本地的图片，可以精准定位几点几分谁用什么tag画了什么图。方括号内为可选内容(使用时不带方括号)
  * **关键词**：命令后附带关键词，将仅检索展示包含该关键词的本地图片
* **#ap**[**删除** |**清空**]**本地图片** `关键词`：删除本地图片,可指定仅删除包含关键词的图片，或删除全部本地图片
* **#ap查水表**`@用户`[ **第**`?` **页**] ：查看指定人绘制过的图片


# 其他功能

* **#看头像**、**#取图链**、**#图链模板**
* **#ap搜图**：使用Ascii2d / SauceNAO / IqDB / TraceMoe / EHentai / Yandex以图搜图，可选参数
* **#ap识别** : 识别图片内的动漫人物与出处

# 预设

* **#ap预设列表** [ `关键词`] [ **第**`?`**页** ]
  * 查看预设列表。方括号内为可选内容(使用时不带方括号)
  * **关键词**：命令后附带关键词，将仅检索展示包含该关键词的预设
* **#ap添加预设** `预设名` **=>** `预设内容` 
  * 绘图时，命令中的 **预设名** 将会被替换为对应的 **预设内容**
* **#ap删除预设** `预设名`
* **#pt列表** [ `关键词`] [ `第?页` ] ：查看接口包含的embeddings的信息。
* **#导出预设** ：导出本机所有预设信息到云端，并生成取件码。
* **#导入预设** [ `取件码` ] ： 从云端导入预设到本机。

# 管理

* **#ap设置** 
  * 查看当前ap策略
* **#ap设置查水表** [ **开启**|**关闭** ]
  * 设置是否允许群员查水表
* **#ap设置通知主人** [ **开启**|**关闭** ]
  * 开启后，有人绘制违规图片时将通知主人
* **#ap** [ **全局** ] **设置** [ `群号`|**私聊** ] **次数** [ `数字`|**无限** ]
* **#ap** [ **全局** ] **设置** [ `群号`|**私聊** ] [ **个人cd**|**群聊cd**|**撤回时间** ] `数字`
* **#ap** [ **全局** ] **设置** [ `群号`|**私聊** ] [ **审核**|**撤回**|**封禁** ] [ **开启**|**关闭** ]
  * 竖线表示不能共存，方括号中为可选内容(使用时不带方括号)
  * **全局**：此次配置对`所有群`生效
  * **群号**：指定群号，此次配置对`该群`生效
  * **私聊**：此次配置对`私聊`生效
  * ps:若未指定全局、群号、私聊，则此次配置对发送消息所在的`当前群`生效
  * **次数**：设置每人每日限额，即每日可绘图的张数。每日0点刷新
  * **个人cd**：每个人绘图之后再次使用绘图需要等待的时间，单位是秒
  * **群聊cd**：整个群聊内共享的cd,群内有人使用绘图之后该群内再次使用绘图需要等待的时间，单位是秒
  * **撤回时间**：指定发送绘制的图片后多久自动撤回，单位是秒，最大`120`
  * **审核**：图片发送前，先使用百度图片审核服务检测图片安全性
  * **撤回**：图片发送后，经过指定的时间之后自动撤回
  * **封禁**：开启后，将封禁试图使用屏蔽词绘图的用户
* **#ap** [ **添加**|**删除** ] **屏蔽词** 
* **#ap屏蔽词列表** 
* **#ap** [ **封禁**|**解封** ]  [ `qq号`|`@某人`]
  * 被封禁的用户无法使用ap插件的功能
* **#ap** 设置存本地[ **开启**|**关闭** ]
  * 开启后绘制的图片将保存在云崽resources/yuhuo/aipainting目录下，用于`查水表`等功能
* **#撤回**
  * 对机器人的消息回复此命令,以撤回该消息

# 配置

* `一键安装依赖`
  * **#ap检查依赖**: 查看依赖是否安装完成
  * **#ap安装依赖**: 一键安装所需要的依赖
* `绘图接口管理`
  * **#ap添加接口**`接口地址`**备注**`我的接口 1`：添加一个接口
  * **#ap接口列表**：查看已添加的接口列表
  * **#ap设置接口**`接口编号`：更换默认接口
  * **#ap删除接口**`接口编号`：删除指定接口
  * **#ap设置接口**`1`账号`你的密码`密码`你的密码`: 设置指定接口的账号密码，用于开启了API鉴权的接口
* `接口模型切换`
  * **#模型列表**: 查看当前接口使用和可用的模型
  * **#切换模型**`模型名称`: 切换当前接口的模型
  * **#VAE列表**: 查看当前接口使用和可用的VAE
  * **#切换VAE**`VAE名称`: 切换当前接口的VAE
* `图片处理接口`
  * **#ap设置大清晰术接口**`接口地址`：配置大清晰术所用接口
  * **#ap设置鉴赏接口**`接口地址`：配置鉴赏(逆推图片tag)所用接口
  * **#ap设置检查ai接口**`接口地址`：配置鉴定图片所用接口
  * **#ap设置去背景接口**`接口地址`：配置抠图所用接口
  * **#ap设置动漫化接口**`接口地址`：配置图片动漫化所用接口
  * **#ap设置图片转音乐接口**`接口地址`：配置图片转音乐接口
  * **#ap设置二次元美学接口**`接口地址`：配置二次元美学评分接口
* `百度图片审核`
  * **#ap设置百度appid**`你的appid`：配置百度图片审核appid
  * **#ap设置百度apikey**`你的apikey`：配置百度图片审核apikey
  * **#ap设置百度secretkey**`你的secretkey`：配置百度图片审核secretkey
* `翻译`
  * **#ap设置百度翻译id**`你的id`：配置百度翻译id
  * **#ap设置百度翻译key**`你的key`：配置百度翻译key
  * **#ap设置有道翻译id**`你的id`：配置有道翻译id
  * **#ap设置有道翻译key**`你的key`：配置有道翻译key
* `切换分支`
  * **#ap当前分支**: 查看当前分支
  * **#ap切换分支**: 在main与dev分支进行切换(dev分支具有不稳定性，小白请勿随意切换)
